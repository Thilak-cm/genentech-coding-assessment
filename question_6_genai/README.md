# Question 6: GenAI Clinical Data Assistant

## Setup
1. Add your OpenAI API key to `.env`:
```
OPENAI_API_KEY=your_key_here
```

2. Install dependencies:
```
pip install -r requirements.txt
```

## Run example queries
```
python run_examples.py
```

### Example output
```
Question: Give me the subjects who had adverse events of Moderate severity
Query -> AESEV == 'MODERATE'
Result -> 136 subjects
USUBJIDs: ['01-701-1023', '01-701-1047', '01-701-1097', '01-701-1111', '01-701-1115', '01-701-1133', '01-701-1146', '01-701-1148', '01-701-1180', '01-701-1181', '01-701-1188', '01-701-1192', '01-701-1211', '01-701-1239', '01-701-1294', '01-701-1302', '01-701-1317', '01-701-1341', '01-701-1360', '01-701-1363', '01-701-1383', '01-701-1444', '01-702-1082', '01-703-1076', '01-703-1086', '01-703-1100', '01-703-1119', '01-703-1182', '01-703-1210', '01-703-1258', '01-703-1295', '01-703-1299', '01-703-1403', '01-703-1439', '01-704-1008', '01-704-1025', '01-704-1065', '01-704-1120', '01-704-1241', '01-704-1266', '01-704-1332', '01-704-1388', '01-705-1059', '01-705-1186', '01-705-1199', '01-705-1281', '01-705-1292', '01-705-1303', '01-705-1310', '01-706-1041', '01-706-1049', '01-706-1384', '01-707-1206', '01-708-1032', '01-708-1347', '01-708-1372', '01-708-1428', '01-709-1081', '01-709-1099', '01-709-1102', '01-709-1168', '01-709-1217', '01-709-1238', '01-709-1306', '01-709-1326', '01-709-1339', '01-709-1424', '01-710-1006', '01-710-1021', '01-710-1045', '01-710-1053', '01-710-1077', '01-710-1137', '01-710-1142', '01-710-1154', '01-710-1166', '01-710-1183', '01-710-1235', '01-710-1249', '01-710-1264', '01-710-1270', '01-710-1271', '01-710-1278', '01-710-1300', '01-710-1315', '01-710-1385', '01-711-1012', '01-711-1143', '01-711-1433', '01-713-1043', '01-713-1141', '01-713-1179', '01-713-1209', '01-713-1269', '01-713-1448', '01-714-1035', '01-714-1068', '01-714-1195', '01-714-1288', '01-714-1375', '01-715-1107', '01-715-1207', '01-715-1319', '01-715-1321', '01-715-1405', '01-716-1024', '01-716-1063', '01-716-1071', '01-716-1094', '01-716-1103', '01-716-1151', '01-716-1167', '01-716-1189', '01-716-1229', '01-716-1298', '01-716-1311', '01-716-1373', '01-716-1418', '01-716-1447', '01-717-1004', '01-717-1174', '01-717-1344', '01-717-1357', '01-717-1446', '01-718-1066', '01-718-1079', '01-718-1139', '01-718-1150', '01-718-1170', '01-718-1250', '01-718-1254', '01-718-1328', '01-718-1355', '01-718-1371', '01-718-1427']

Question: Which subjects reported Headache?
Query -> AETERM == 'HEADACHE'
Result -> 16 subjects
USUBJIDs: ['01-701-1180', '01-701-1302', '01-701-1363', '01-701-1383', '01-704-1388', '01-708-1019', '01-708-1087', '01-708-1272', '01-708-1316', '01-709-1217', '01-709-1339', '01-710-1137', '01-710-1142', '01-710-1315', '01-711-1036', '01-716-1418']

Question: Which subjects experienced at least one SEVERE treatment-emergent adverse event related to drug?
Query -> AESEV == 'SEVERE' AND TRTEMFL == 'Y' AND AEREL != 'NONE'
Result -> 18 subjects
USUBJIDs: ['01-703-1086', '01-703-1119', '01-704-1135', '01-706-1049', '01-708-1019', '01-708-1178', '01-708-1428', '01-709-1007', '01-710-1083', '01-710-1154', '01-710-1271', '01-714-1195', '01-716-1103', '01-717-1174', '01-718-1066', '01-718-1079', '01-718-1170', '01-718-1427']
```

## Notes
- The assistant loads `.env` using `python-dotenv`.
- If `OPENAI_API_KEY` is missing, the code falls back to a mocked LLM response so the
  prompt → parse → execute flow still runs.
